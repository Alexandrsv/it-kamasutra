(this["webpackJsonpit-kamasutra"]=this["webpackJsonpit-kamasutra"]||[]).push([[3],{286:function(t,e,s){"use strict";e.a=s.p+"static/media/avatar-placeholder.05262aba.png"},291:function(t,e,s){t.exports={content:"Profile_content__2wLDD",image_header:"Profile_image_header__2kIvZ"}},292:function(t,e,s){t.exports={image_header:"ProfileInfo_image_header__28rWN",description_block:"ProfileInfo_description_block__187mR",avatarImg:"ProfileInfo_avatarImg__2izmI",contact:"ProfileInfo_contact__1N3gp"}},293:function(t,e,s){t.exports={posts_block:"MyPosts_posts_block__2sqK_",posts:"MyPosts_posts__3tZ1c"}},294:function(t,e,s){t.exports={item:"Post_item__ihtu9",posts:"Post_posts__144VX",text:"Post_text__3_Vii"}},297:function(t,e,s){"use strict";s.r(e);var a=s(3),o=s(50),n=s(51),r=s(53),i=s(52),c=s(0),l=s.n(c),u=s(22),d=s(291),j=s.n(d);var b=s(123);function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var s=[],a=!0,o=!1,n=void 0;try{for(var r,i=t[Symbol.iterator]();!(a=(r=i.next()).done)&&(s.push(r.value),!e||s.length!==e);a=!0);}catch(c){o=!0,n=c}finally{try{a||null==i.return||i.return()}finally{if(o)throw n}}return s}}(t,e)||Object(b.a)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var h=s(67),f=s(292),O=s.n(f),m=s(1),v=function(t){Object(r.a)(s,t);var e=Object(i.a)(s);function s(){var t;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))).state={editMode:!1,status:t.props.status},t.activateEditMode=function(){t.props.isOwner?t.setState({editMode:!0}):console.log("\u0421\u0442\u0443\u0442\u0443\u0441 \u043c\u0435\u043d\u044f\u0442\u044c \u043d\u0435 \u0434\u043e\u0437\u0432\u043e\u043b\u0435\u043d\u043e!")},t.onStatusChange=function(e){t.setState({status:e.currentTarget.value})},t}return Object(n.a)(s,[{key:"deactivateEditMode",value:function(){this.setState({editMode:!1}),this.props.updateStatus(this.state.status)}},{key:"componentDidUpdate",value:function(t,e){t.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){return Object(m.jsxs)("div",{children:[!this.state.editMode&&Object(m.jsx)("div",{children:Object(m.jsx)("span",{onDoubleClick:this.activateEditMode,children:this.props.status||"-------"})}),this.state.editMode&&Object(m.jsx)("div",{children:Object(m.jsx)("input",{onChange:this.onStatusChange,autoFocus:!0,onBlur:this.deactivateEditMode.bind(this),value:this.state.status})})]})}}]),s}(l.a.Component),x=s(286),g=s(125),_=s(126),y=s(66),P=s(43),k=s.n(P),S=Object(_.a)({form:"edit-profile"})((function(t){var e=t.profile,s=t.isOwner,a=t.handleSubmit,o=t.error;return Object(m.jsxs)("form",{onSubmit:a,children:[s&&Object(m.jsx)("div",{children:Object(m.jsx)("button",{children:"\ud83d\udcbesave"})}),o&&Object(m.jsx)("div",{style:{padding:"19px 0"},children:Object(m.jsx)("span",{className:k.a.formSummaryError,children:o})}),Object(m.jsx)("br",{}),Object(m.jsx)("b",{children:"Full name:"}),Object(m.jsx)(g.a,{placeholder:"Full name",name:"fullName",validate:[],component:y.a}),Object(m.jsx)("b",{children:"Looking for a job:"}),Object(m.jsx)(g.a,{name:"lookingForAJob",type:"checkbox",component:y.a}),Object(m.jsx)("b",{children:"My professional skills:"}),Object(m.jsx)(g.a,{placeholder:"My professional skills",name:"lookingForAJobDescription",validate:[],component:y.b}),Object(m.jsx)("b",{children:"About me:"}),Object(m.jsx)(g.a,{placeholder:"",name:"aboutMe",validate:[],component:y.b}),Object(m.jsx)("b",{children:"Contacts:"}),Object(m.jsx)("div",{children:Object.entries(e.contacts).map((function(t){return Object(m.jsxs)("div",{children:[t[0],Object(m.jsx)(g.a,{name:"contacts."+t[0],component:y.a})]},t[0])}))})]})})),w=function(t){var e=t.profile,s=t.isOwner,a=t.goToEditMode;return Object(m.jsxs)("div",{children:[s&&Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:a,children:"\ud83d\udcddedit"})}),Object(m.jsxs)("div",{children:[Object(m.jsx)("b",{children:"Looking for a job"})," - ",e.lookingForAJob?"yes":"no"]}),e.lookingForAJob&&Object(m.jsxs)("div",{children:[Object(m.jsx)("b",{children:"My skills"})," - ",e.lookingForAJobDescription]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("b",{children:"About me"})," - ",e.aboutMe]}),Object(m.jsx)("br",{}),Object(m.jsx)("b",{children:"Contacts:"}),Object(m.jsx)("div",{children:Object.entries(e.contacts).map((function(t,e){return Object(m.jsx)(M,{contactTitle:t[0],contactValue:t[1]},e)}))})]})},M=function(t){var e,s=t.contactTitle,a=t.contactValue;return e=!/^https?:\/\//.test(a)&&a?"https://"+a:a,Object(m.jsxs)("div",{className:O.a.contact,children:[s," - ",Object(m.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:e})]})},A=function(t){var e=t.profile,s=t.status,a=t.updateStatus,o=t.isOwner,n=t.saveAvatarPhoto,r=t.saveProfile,i=p(Object(c.useState)(!1),2),l=i[0],u=i[1];if(!e)return Object(m.jsx)(h.a,{});return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:O.a.description_block,children:[Object(m.jsx)("h2",{children:e.fullName}),Object(m.jsx)("img",{className:O.a.avatarImg,src:e.photos.large||x.a,alt:""}),o&&Object(m.jsx)("input",{onChange:function(t){t.target.files.length&&n(t.target.files[0])},type:"file",name:"avatar_upload",accept:".jpg, .jpeg, .png, .svg"}),Object(m.jsx)("hr",{}),Object(m.jsx)(v,{status:s,updateStatus:a,isOwner:o}),Object(m.jsx)("hr",{}),l?Object(m.jsx)(S,{profile:e,isOwner:o,initialValues:e,onSubmit:function(t){console.log(t),r(t).then((function(){u(!1)}))}}):Object(m.jsx)(w,{profile:e,isOwner:o,goToEditMode:function(){u(!0)}})]})})},I=s(92),N=s(293),D=s.n(N),C=s(294),E=s.n(C),F=function(t){return Object(m.jsxs)("div",{className:E.a.item,children:[Object(m.jsx)("img",{src:"https://i.pravatar.cc/80?img=".concat(Math.floor(50*Math.random())),alt:"ava"}),Object(m.jsx)("span",{className:E.a.text,children:t.message}),Object(m.jsx)("div",{children:Object(m.jsxs)("span",{children:[t.like_count," \u2764"]})})]})},T=s(70),J=l.a.memo((function(t){return console.log("RENDER"),Object(m.jsxs)("div",{className:D.a.posts_block,children:[Object(m.jsx)("h2",{children:"My posts"}),Object(m.jsx)("div",{children:Object(m.jsx)("div",{children:Object(m.jsx)(V,{onSubmit:function(e){t.addPost(e.newPostBody)}})})}),Object(m.jsx)("div",{className:D.a.posts,children:t.posts.map((function(t){return Object(m.jsx)(F,{id:t.id,message:t.message,like_count:t.like_count},t.id)}))})]})})),U=Object(T.a)(10),V=Object(_.a)({form:"ProfileAddNewPostForm"})((function(t){return Object(m.jsxs)("form",{onSubmit:t.handleSubmit,children:[Object(m.jsx)("div",{children:Object(m.jsx)(g.a,{placeholder:"New post text",type:"text",name:"newPostBody",component:y.b,validate:[T.b,U]})}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{children:"Add post"})})]})})),z=J,B=Object(u.b)((function(t){return{posts:t.profilePage.posts,newPostText:t.profilePage.newPostText}}),(function(t){return{addPost:function(e){t(Object(I.a)(e))}}}))(z),L=function(t){return Object(m.jsxs)("div",{className:j.a.content,children:[Object(m.jsx)(A,{profile:t.profile,status:t.status,updateStatus:t.updateStatus,isOwner:t.isOwner,saveAvatarPhoto:t.saveAvatarPhoto,saveProfile:t.saveProfile}),Object(m.jsx)(B,{})]})},R=s(11),Z=s(10),q=function(t){Object(r.a)(s,t);var e=Object(i.a)(s);function s(){return Object(o.a)(this,s),e.apply(this,arguments)}return Object(n.a)(s,[{key:"refreshProfile",value:function(){var t=this.props.match.params.userId||this.props.authorizedUserId;t||this.props.history.push("login"),this.props.getUserProfileData(t),this.props.getStatus(t)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t){t.match.params.userId!==this.props.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(m.jsx)("div",{children:Object(m.jsx)(L,Object(a.a)(Object(a.a)({},this.props),{},{profile:this.props.profile,isOwner:!this.props.match.params.userId||String(this.props.authorizedUserId)===this.props.match.params.userId,saveAvatarPhoto:this.props.saveAvatarPhoto}))})}}]),s}(l.a.Component);e.default=Object(Z.d)(Object(u.b)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,authorizedUserId:t.auth.userId,isAuth:t.auth.isAuth}}),{getUserProfileData:I.d,getStatus:I.c,updateStatus:I.g,saveAvatarPhoto:I.e,saveProfile:I.f}),R.f)(q)}}]);
//# sourceMappingURL=3.8aec86c7.chunk.js.map