(this["webpackJsonpit-kamasutra"]=this["webpackJsonpit-kamasutra"]||[]).push([[0],{124:function(t,e,n){"use strict";n.d(e,"b",(function(){return s}));var r=n(39),a=n(3),c="SEND_MESSAGE",i={messages:[{id:1,message:"\u043d\u041e\u0440\u043c?"},{id:2,message:"\u043d\u041e\u0440\u043c."},{id:3,message:"\u043d\u041e\u0440\u043c!"}],dialogs:[{id:"1",name:"Alexandr"},{id:"2",name:"Viktor"},{id:"3",name:"Yuri"},{id:"4",name:"Vladimir"}]},s=function(t){return{type:c,newMessageBody:t}};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c:var n=e.newMessageBody;return Object(a.a)(Object(a.a)({},t),{},{messages:[].concat(Object(r.a)(t.messages),[{id:Math.floor(500*Math.random()),message:n}])});default:return t}}},128:function(t,e,n){"use strict";n.d(e,"e",(function(){return g})),n.d(e,"d",(function(){return x})),n.d(e,"f",(function(){return w})),n.d(e,"c",(function(){return y})),n.d(e,"b",(function(){return k})),n.d(e,"g",(function(){return C}));var r=n(9),a=n.n(r),c=n(14),i=n(39),s=n(3),o=n(13),u=function(t,e,n,r){return t.map((function(t){return t[n]===e?Object(s.a)(Object(s.a)({},t),r):t}))},l="users/FOLLOW",d="users/UNFOLLOW",f="users/SET_USERS",j="users/SET_CURRENT_PAGE",p="users/SET_TOTAL_USERS_COUNT",b="users/TOGGLE_IS_FETCHING",h="users/TOGGLE_IS_FOLLOWING_PROGRESS",O={users:[],pageSize:7,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},m=function(t){return{type:l,userid:t}},v=function(t){return{type:d,userid:t}},g=function(t){return{type:f,users:t}},x=function(t){return{type:j,currentPage:t}},_=function(t){return{type:b,isFetching:t}},w=function(t,e){return{type:h,isFetching:t,userId:e}},y=function(t,e){return function(){var n=Object(c.a)(a.a.mark((function n(r){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(_(!0)),r(x(t)),n.next=4,o.c.getUsers(t,e);case 4:c=n.sent,r(_(!1)),r(g(c.items)),r((a=c.totalCount,{type:p,totalCount:a}));case 8:case"end":return n.stop()}var a}),n)})));return function(t){return n.apply(this,arguments)}}()},S=function(){var t=Object(c.a)(a.a.mark((function t(e,n,r,c){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(w(!0,n)),t.next=3,r(n);case 3:0===t.sent.resultCode&&e(c(n)),e(w(!1,n));case 6:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),k=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(n,t,o.c.follow.bind(o.c),m);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(n,t,o.c.unfollow.bind(o.c),v);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l:return Object(s.a)(Object(s.a)({},t),{},{users:u(t.users,e.userid,"id",{followed:!0})});case d:return Object(s.a)(Object(s.a)({},t),{},{users:u(t.users,e.userid,"id",{followed:!1})});case f:return Object(s.a)(Object(s.a)({},t),{},{users:e.users});case j:return Object(s.a)(Object(s.a)({},t),{},{currentPage:e.currentPage});case p:return Object(s.a)(Object(s.a)({},t),{},{totalUsersCount:e.totalCount});case b:return Object(s.a)(Object(s.a)({},t),{},{isFetching:e.isFetching});case h:return Object(s.a)(Object(s.a)({},t),{},{followingInProgress:e.isFetching?[].concat(Object(i.a)(t.followingInProgress),[e.userId]):t.followingInProgress.filter((function(t){return t!==e.userId}))});default:return t}}},13:function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return s}));var r=n(129),a=r.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"be82d700-54e4-4201-a22e-d509e44f0f71"}}),c={getUsers:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return a.get("/users?page=".concat(t,"&count=").concat(e)).then((function(t){return t.data}))},unfollow:function(t){return a.delete("follow/".concat(t)).then((function(t){return t.data}))},follow:function(t){return a.post("follow/".concat(t)).then((function(t){return t.data}))}},i={getProfileData:function(t){return a.get("profile/".concat(t)).then((function(t){return t.data}))},getStatus:function(t){return a.get("profile/status/".concat(t)).then((function(t){return t.data}))},updateStatus:function(t){return a.put("profile/status/",{status:t}).then((function(t){return t.data}))},saveProfile:function(t){return a.put("profile/",t).then((function(t){return t.data}))},saveAvatarPhoto:function(t){var e=new FormData;return e.append("image",t),a.put("profile/photo/",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){return t.data}))}},s={me:function(){return a.get("auth/me").then((function(t){return t.data}))},login:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a.post("auth/login",{email:t,password:e,rememberMe:n})},logout:function(){return a.delete("auth/login")}}},16:function(t,e,n){t.exports={nav:"Navbar_nav__2imOE",item:"Navbar_item__zmMk4",active_link:"Navbar_active_link__2vAVe"}},161:function(t,e,n){},285:function(t,e,n){"use strict";n.r(e);n(93);var r=function(t){t&&t instanceof Function&&n.e(6).then(n.bind(null,296)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),r(t),a(t),c(t),i(t)}))},a=n(0),c=n.n(a),i=n(62),s=n.n(i),o=n(50),u=n(51),l=n(53),d=n(52),f=(n(161),n(16)),j=n.n(f),p=n(18),b=n(85),h=n.n(b),O=n(1),m=function(){return Object(O.jsxs)("div",{className:h.a.friends,children:[Object(O.jsx)("div",{children:"Friends:"}),Object(O.jsxs)("div",{className:h.a.images,children:[Object(O.jsx)("img",{src:"https://i.pravatar.cc/80?img=".concat(Math.floor(50*Math.random())),alt:"ava"}),Object(O.jsx)("img",{src:"https://i.pravatar.cc/80?img=".concat(Math.floor(50*Math.random())),alt:"ava"}),Object(O.jsx)("img",{src:"https://i.pravatar.cc/80?img=".concat(Math.floor(50*Math.random())),alt:"ava"}),Object(O.jsx)("img",{src:"https://i.pravatar.cc/80?img=".concat(Math.floor(50*Math.random())),alt:"ava"}),Object(O.jsx)("img",{src:"https://i.pravatar.cc/80?img=".concat(Math.floor(50*Math.random())),alt:"ava"}),Object(O.jsx)("img",{src:"https://i.pravatar.cc/80?img=".concat(Math.floor(50*Math.random())),alt:"ava"})]})]})},v=function(){return Object(O.jsxs)("nav",{className:j.a.nav,children:[Object(O.jsx)("div",{className:j.a.item,children:Object(O.jsx)(p.b,{to:"/profile",activeClassName:j.a.active_link,children:"Profile"})}),Object(O.jsx)("div",{className:j.a.item,children:Object(O.jsx)(p.b,{to:"/dialogs",activeClassName:j.a.active_link,children:"Dialogs"})}),Object(O.jsx)("div",{className:j.a.item,children:Object(O.jsx)(p.b,{to:"/users",activeClassName:j.a.active_link,children:"Users"})}),Object(O.jsx)("div",{className:"".concat(j.a.item),children:Object(O.jsx)(p.b,{to:"/news",activeClassName:j.a.active_link,children:"News"})}),Object(O.jsx)("div",{className:j.a.item,children:Object(O.jsx)(p.b,{to:"/music",activeClassName:j.a.active_link,children:"Music"})}),Object(O.jsx)("div",{className:j.a.item,children:Object(O.jsx)(p.b,{to:"/settings",activeClassName:j.a.active_link,children:"Settings"})}),Object(O.jsx)(m,{})]})},g=n(11),x=n(3),_=n(22),w=n(88),y=n.n(w),S=function(t){return Object(O.jsxs)("header",{className:y.a.header,children:[Object(O.jsx)("img",{alt:"logo",src:"https://svgx.ru/svg/1775543.svg"}),Object(O.jsx)("div",{className:y.a.loginBlock,children:t.isAuth?Object(O.jsxs)(p.b,{to:"/profile/".concat(t.userId),children:[t.login," ",Object(O.jsx)("button",{onClick:t.logout,children:"Logout"})]}):Object(O.jsx)(p.b,{to:"/login",children:"Login"})})]})},k=n(9),C=n.n(k),E=n(14),N=n(13),P=n(33),I="auth/SET_USER_DATA",M={userId:null,email:null,login:null,isAuth:!1},T=function(t,e,n,r){return{type:I,data:{userId:t,email:e,login:n,isAuth:r}}},A=function(){return function(){var t=Object(E.a)(C.a.mark((function t(e){var n,r,a,c,i;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.me();case 2:0===(n=t.sent).resultCode&&(r=n.data,a=r.id,c=r.login,i=r.email,e(T(a,i,c,!0)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},F=function(){return function(){var t=Object(E.a)(C.a.mark((function t(e){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.logout();case 2:0===t.sent.data.resultCode&&e(T(null,null,null,!1));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},U=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case I:return Object(x.a)(Object(x.a)({},t),e.data);default:return t}},L=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.getAuthUserData()}},{key:"render",value:function(){return Object(O.jsx)(S,Object(x.a)({},this.props))}}]),n}(c.a.Component),D=Object(_.b)((function(t){return{login:t.auth.login,isAuth:t.auth.isAuth,userId:t.auth.userId}}),{getAuthUserData:A,logout:F})(L),z=n(125),R=n(126),G=n(66),B=n(70),V=n(43),q=n.n(V),Z=Object(R.a)({form:"login"})((function(t){var e=t.handleSubmit,n=t.error;return Object(O.jsxs)("form",{onSubmit:e,children:[Object(O.jsx)("div",{children:Object(O.jsx)(z.a,{placeholder:"Email",name:"email",required:!0,component:G.a,validate:[B.b]})}),Object(O.jsx)("div",{children:Object(O.jsx)(z.a,{placeholder:"Pass",type:"password",required:!0,name:"password",component:G.a,validate:[B.b]})}),Object(O.jsxs)("div",{children:[Object(O.jsx)(z.a,{type:"checkbox",name:"rememberMe",component:"input"}),"remember me"]}),n&&Object(O.jsx)("div",{style:{padding:"19px 0"},children:Object(O.jsx)("span",{className:q.a.formSummaryError,children:n})}),Object(O.jsx)("div",{children:Object(O.jsx)("button",{children:"Login"})})]})})),H=Object(_.b)((function(t){return{isAuth:t.auth.isAuth}}),{login:function(t,e,n){return function(){var r=Object(E.a)(C.a.mark((function r(a){var c,i;return C.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,N.a.login(t,e,n);case 2:0===(c=r.sent).data.resultCode?a(A()):(i=c.data.messages.length>0?c.data.messages:"Some error",a(Object(P.a)("login",{_error:i})));case 4:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()}})((function(t){return t.isAuth?Object(O.jsx)(g.a,{to:"/profile"}):Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:"Login "}),Object(O.jsx)(Z,{onSubmit:function(e){console.log(e),t.login(e.email,e.password,e.rememberMe)}})]})})),W=n(10),X="INITIALIZED_SUCCESS",J={initialized:!1},K=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case X:return Object(x.a)(Object(x.a)({},t),{},{initialized:!0});default:return t}},Y=n(67),Q=n(92),$=n(124),tt={qwe:123},et=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"123":default:return t}},nt=n(128),rt=n(131),at=n(127),ct=Object(W.c)({profilePage:Q.b,dialogsPage:$.a,usersPage:nt.a,sidebar:et,auth:U,app:K,form:at.a}),it=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||W.d,st=Object(W.e)(ct,it(Object(W.a)(rt.a)));window.__store__=st;var ot=st,ut=function(t){return function(e){return Object(O.jsx)(c.a.Suspense,{fallback:Object(O.jsx)("div",{children:"\ud83d\udce1\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}),children:Object(O.jsx)(t,Object(x.a)({},e))})}},lt=c.a.lazy((function(){return n.e(4).then(n.bind(null,298))})),dt=c.a.lazy((function(){return n.e(3).then(n.bind(null,297))})),ft=c.a.lazy((function(){return n.e(5).then(n.bind(null,299))})),jt=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(O.jsxs)("div",{className:"app-wrapper",children:[Object(O.jsx)(D,{}),Object(O.jsx)(v,{}),Object(O.jsxs)("div",{className:"app-wrapper-content",children:[Object(O.jsx)(g.b,{path:"/login",render:function(){return Object(O.jsx)(H,{})}}),Object(O.jsx)(g.b,{path:"/dialogs",render:ut(lt)}),Object(O.jsx)(g.b,{path:"/profile/:userId?",render:ut(dt)}),Object(O.jsx)(g.b,{path:"/users",render:ut(ft)})]})]}):Object(O.jsx)(Y.a,{})}}]),n}(a.Component),pt=Object(W.d)(g.f,Object(_.b)((function(t){return{initialized:t.app.initialized}}),{initializeApp:function(){return function(t){var e=[t(A())];Promise.all([e]).then((function(){t({type:X})}))}},logout:F}))(jt),bt=function(){return Object(O.jsx)(p.a,{children:Object(O.jsx)(_.a,{store:ot,children:Object(O.jsx)(pt,{})})})};s.a.render(Object(O.jsx)(bt,{}),document.getElementById("root")),r()},43:function(t,e,n){t.exports={formControl:"FormsControl_formControl__1ZwPZ",error:"FormsControl_error__2Zkz5",formSummaryError:"FormsControl_formSummaryError__1PkX-"}},66:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return l}));var r=n(3),a=n(91),c=(n(0),n(43)),i=n.n(c),s=n(1),o=function(t){var e=t.meta,n=e.touched,r=e.error,a=t.children,c=r&&n;return Object(s.jsxs)("div",{className:i.a.formControl+" "+(c?i.a.error:""),children:[Object(s.jsx)("div",{children:a}),c&&Object(s.jsx)("span",{children:r})]})},u=function(t){var e=t.input,n=(t.meta,t.child,Object(a.a)(t,["input","meta","child"]));return Object(s.jsx)(o,Object(r.a)(Object(r.a)({},t),{},{children:Object(s.jsx)("textarea",Object(r.a)(Object(r.a)({},e),n))}))},l=function(t){var e=t.input,n=(t.meta,t.child,Object(a.a)(t,["input","meta","child"]));return Object(s.jsx)(o,Object(r.a)(Object(r.a)({},t),{},{children:Object(s.jsx)("input",Object(r.a)(Object(r.a)({},e),n))}))}},67:function(t,e,n){"use strict";n(0);var r=n.p+"static/media/preloader.0b5d9161.gif",a=n(1);e.a=function(t){return Object(a.jsx)("img",{src:r,alt:"loading"})}},70:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return a}));var r=function(t){if(!t)return"Field is required"},a=function(t){return function(e){if(e&&e.length>t)return"Max length is ".concat(t," symbols")}}},85:function(t,e,n){t.exports={friends:"Friends_friends__1-Zf7",images:"Friends_images__2QqNV"}},88:function(t,e,n){t.exports={header:"Header_header__1VCKf",loginBlock:"Header_loginBlock__6mma5"}},92:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"d",(function(){return m})),n.d(e,"c",(function(){return v})),n.d(e,"g",(function(){return g})),n.d(e,"e",(function(){return x})),n.d(e,"f",(function(){return _}));var r=n(9),a=n.n(r),c=n(14),i=n(39),s=n(3),o=n(13),u=n(33),l="profile/ADD-POST",d="profile/SET_USER_PROFILE",f="profile/SET_STATUS",j="profile/DELETE_POST",p="profile/SAVE_PHOTO_SUCCESS",b={posts:[{id:"1",message:"\u041f\u0440\u0438\u0432\u0435\u0442, \u0442\u044b \u043a\u0430\u043a?",like_count:12},{id:"2",message:"\u041c\u043e\u0439 \u043f\u0435\u0440\u0432\u044b\u0439 \u043f\u043e\u0441\u0442",like_count:20}],profile:null,status:""},h=function(t){return{type:l,newPostText:t}},O=function(t){return{type:f,status:t}},m=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.getProfileData(t);case 2:r=e.sent,n({type:d,profile:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.getStatus(t);case 2:r=e.sent,n(O(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.updateStatus(t);case 2:0===e.sent.resultCode&&n(O(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.saveAvatarPhoto(t);case 2:0===(r=e.sent).resultCode&&n((a=r.data.photos,{type:p,photosUrl:a}));case 4:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}()},_=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n,r){var c,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.saveProfile(t);case 2:if(c=e.sent,i=r().auth.userId,0!==c.resultCode){e.next=8;break}n(m(i)),e.next=11;break;case 8:return s=c.messages.length>0?c.messages[0]:"Some error",n(Object(u.a)("edit-profile",{_error:s})),e.abrupt("return",Promise.reject(s));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()};e.b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l:var n={id:Math.floor(500*Math.random()),message:e.newPostText,like_count:0};return Object(s.a)(Object(s.a)({},t),{},{posts:[n].concat(Object(i.a)(t.posts))});case d:return Object(s.a)(Object(s.a)({},t),{},{profile:e.profile});case f:return Object(s.a)(Object(s.a)({},t),{},{status:e.status});case p:return Object(s.a)(Object(s.a)({},t),{},{profile:Object(s.a)(Object(s.a)({},t.profile),{},{photos:e.photosUrl})});case j:return Object(s.a)(Object(s.a)({},t),{},{posts:t.posts.filter((function(t){return parseInt(t.id)!==e.postId}))});default:return t}}},93:function(t,e,n){}},[[285,1,2]]]);
//# sourceMappingURL=main.b0ffcdc6.chunk.js.map