(this["webpackJsonpit-kamasutra"]=this["webpackJsonpit-kamasutra"]||[]).push([[6],{393:function(e,t,n){"use strict";n.r(t);var c=n(70),s=n(381),r=n(0),a=n(124),i=n(391),o=n(28),u=n(1),l=function(){var e=Object(r.useState)(),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e,t=function(){console.log("Close WS"),setTimeout(n,3e3)};function n(){var n,s,r;null===(n=e)||void 0===n||n.removeEventListener("close",t),null===(s=e)||void 0===s||s.close(),null===(r=e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"))||void 0===r||r.addEventListener("close",t),c(e)}return n(),function(){e.removeEventListener("close",t),e.close()}}),[]),Object(u.jsxs)("div",{children:[Object(u.jsx)(j,{wsChannel:n}),Object(u.jsx)(d,{wsChannel:n})]})},j=function(e){var t=e.wsChannel,n=Object(r.useState)([]),a=Object(s.a)(n,2),i=a[0],o=a[1];return Object(r.useEffect)((function(){var e=function(e){var t=JSON.parse(e.data);console.log(t),o((function(e){return[].concat(Object(c.a)(e),Object(c.a)(t))}))};return null===t||void 0===t||t.addEventListener("message",e),function(){null===t||void 0===t||t.removeEventListener("message",e)}}),[t]),Object(u.jsx)("div",{style:{height:"500px",overflowY:"auto"},children:i.map((function(e,t){return Object(u.jsx)(v,{message:e},t)}))})},d=function(e){var t=e.wsChannel,n=Object(r.useState)(""),c=Object(s.a)(n,2),o=c[0],l=c[1],j=Object(r.useState)("pending"),d=Object(s.a)(j,2),v=d[0],b=d[1];Object(r.useEffect)((function(){var e=function(){return b("ready")};return null===t||void 0===t||t.addEventListener("open",e),function(){null===t||void 0===t||t.removeEventListener("open",e)}}),[t]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:Object(u.jsx)(i.a,{onChange:function(e){l(e.currentTarget.value)},value:o})}),Object(u.jsx)("div",{children:Object(u.jsx)(a.a,{disabled:null==v||"ready"!==v,onClick:function(){o&&(null===t||void 0===t||t.send(o),l(""))},children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})})]})},v=function(e){var t=e.message;return Object(u.jsxs)("div",{children:[Object(u.jsx)("img",{src:t.photo,style:{width:"40px"},alt:"ava"}),Object(u.jsxs)(o.b,{to:"/profile/".concat(t.userId),children:[t.userName," "]}),Object(u.jsx)("br",{}),t.message,Object(u.jsx)("hr",{})]})};t.default=function(){return Object(u.jsx)("div",{children:Object(u.jsx)(l,{})})}}}]);
//# sourceMappingURL=6.ad7ff6f7.chunk.js.map